#!/bin/bash

# File:   floating_calculator
# Author: Marco Plaitano
# Date:   20 Nov 2022
# Brief:  Launch a terminal running the python shell to perform calculations.
#         If python is not found, launch the default calculator app.


_is_running() {
    calc_pid=$(pgrep -a xfce4-terminal | grep calculator | awk '{print $1}')
    [[ -z $calc_pid ]] && calc_pid=$(pgrep $CALCULATOR)
    [[ -n $calc_pid ]]
}

_kill_calculator() {
    killall $CALCULATOR
    calc_pid=$(pgrep -a xfce4-terminal | grep calculator | awk '{print $1}')
    if [[ -n $calc_pid ]]; then
        kill $calc_pid
    fi
}


readonly CALCULATOR="${CALCULATOR:=mate-calc}"

if command -v python3 &>/dev/null; then
    xfce4-terminal --geometry=60x10 \
                   --role="calculator" --initial-title "Calculator" \
                   --command="python3 -q" &>/dev/null & disown
elif command -v $CALCULATOR &>/dev/null; then
    $CALCULATOR &>/dev/null & disown
fi
